## Hidden Ability Documentation

In vanilla HG, there are a number of fields in a Pokémon's data structure that are unused.  For some reason, GF devs were thorough and made sure they were still accessible through the ``GetMonData`` and ``SetMonData`` functions.
In substructure 2 of the ``BoxMonData`` structure, there is 24 bits at the end that go unused, a u8 and a u16, which are accessed through ``SetMonData`` parameter ``ID_PARA_dummy_p2_1`` and ``ID_PARA_dummy_p2_2``, respectively.

The least significant bit is taken from ``ID_PARA_dummy_p2_1`` and used as a second ``abilityslot`` flag of sorts to tell the engine when setting the ability that the hidden ability should be set.
The hidden ability is generated in a new file that is placed in a028.  This table is generated by ``armips/data/hiddenabilities.s``.  An empty entry of ``ABILITY_NONE`` will default to the two abilities defined in the personal structure in ``armips/data/mondata.s`` as well as default handling.
The hidden ability bit takes precedence over the ability slot determination.

The way chosen to go about letting the player manipulate this is to use a script flag, configurable in ``include/config.h``.  By default, it is 2600, an initially free and unused flag.  This is automatically unset when a Pokémon's hidden ability is set this way.  This is done to prevent form changes and other code from inadvertently setting the hidden ability bit in battles and other such things.  This script flag affects Pokémon given by scripts as well as those generated by the ``WildBattle`` script command.

For trainers, setting the ``abilityslot`` field to a value of 2 will give the Pokémon its hidden ability.  This is recommended over using the ability override, as form changes that change abilities need to take the hidden ability bit into account.

In the event that you are looking to code access to the hidden ability in a ``PartyPokemon`` structure, the best way to access the hidden ability bit is:

```c
u32 doesMonHaveHiddenAbility = GetMonData(partyPokemon, ID_PARA_dummy_p2_2, NULL) & 1;
```

Because there is no separation between this bit and the rest of the bits in ``ID_PARA_dummy_p2_2``, the best way to set this bit would then be something like:

```c
u16 dummy_p2_2 = GetMonData(partyPokemon, ID_PARA_dummy_p2_2, NULL);
dummy_p2_2 |= 1;
SetMonData(partyPokemon, ID_PARA_dummy_p2_2, &dummy_p2_2);
```

There are macros for this for both ``partyPokemon`` and ``boxPokemon``:
```c
SET_MON_HIDDEN_ABILTY_BIT(mon);
//and
SET_BOX_MON_HIDDEN_ABILTY_BIT(boxmon);
```
Hidden abilities are not currently passed through breeding subject to further research.
