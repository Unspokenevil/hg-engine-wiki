## Hidden Ability Documentation

In vanilla HG, there are a number of fields in a Pokémon's data structure that are unused.  For some reason, GF devs were thorough and made sure they were still accessible through the GetMonData and SetMonData functions.
In substructure 2 of the BoxMonData structure, there is 24 bits at the end that go unused, a u8 and a u16, which are accessed through SetMonData parameter ``ID_PARA_dummy_p2_1`` and ``ID_PARA_dummy_p2_2``, respectively.

The least significant bit is taken from ``ID_PARA_dummy_p2_2`` and used as a second ``abilityslot`` flag of sorts to tell the engine when setting the ability that the hidden ability should be set.
The hidden ability is generated in a new file that is placed in a028.  This table is generated by ``armips/data/hiddenabilities.s``.  An empty entry of ``ABILITY_NONE`` will default to the two abilities defined in the personal structure in ``armips/data/mondata.s`` as well as default handling.
The hidden ability bit takes precedence over the ability slot determination.

Meowstic specifically has a different hidden ability between male and female instances.  This is handled as an outstanding exception directly in the main ``GetMonHiddenAbility`` function in ``src/pokemon.c``.

The way chosen to go about letting the player manipulate this is to have an address, viewable in ``offsets.ini`` upon compilation, that using an ``AdrsValueSet`` from DSPRE will make all generated Pokémon have their Hidden Ability.
Writing a ``01`` to the offset next to ``HiddenAbilityToggleByte`` from ``offsets.ini`` achieves this effect.
This lets scripted encounters easily toggle the byte.  For example, if ``HiddenAbilityToggleByte`` is located at ``0x023D8A50``, then hidden abilities are set on by the script command ``AdrsValueSet 0x023D8A50 1``.  The byte is toggled off automatically when the hidden ability is given primarily to prevent it interfering with form changes that use the same function to restore abilities.

For trainers, there is already an ability override function in the trainer structure (see the relevant page on trainer structure), which is recommended over setting the global hidden ability toggle.

In the event that you are looking to code access to the hidden ability in a PartyPokemon structure, the best way to access the hidden ability bit is:

```c
u32 doesMonHaveHiddenAbility = GetMonData(partyPokemon, ID_PARA_dummy_p2_2, NULL) & 1;
```

Because there is no separation between this bit and the rest of the bits in ``ID_PARA_dummy_p2_2``, the best way to set this bit would then be something like:

```c
u16 dummy_p2_2 = GetMonData(partyPokemon, ID_PARA_dummy_p2_2, NULL);
dummy_p2_2 |= 1;
SetMonData(partyPokemon, ID_PARA_dummy_p2_2, &dummy_p2_2);
```

There are macros for this for both ``partyPokemon`` and ``boxPokemon``:
```c
SET_MON_HIDDEN_ABILTY_BIT(mon);
//and
SET_BOX_MON_HIDDEN_ABILTY_BIT(boxmon);
```
Hidden abilities are not currently passed through breeding subject to further research.
